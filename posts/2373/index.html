<!-- build time:Thu Feb 23 2023 08:49:53 GMT+0000 (Coordinated Universal Time) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="乌弥的小屋" href="https://www.umi.homes/rss.xml"><link rel="alternate" type="application/atom+xml" title="乌弥的小屋" href="https://www.umi.homes/atom.xml"><link rel="alternate" type="application/json" title="乌弥的小屋" href="https://www.umi.homes/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="nas,jellyfin"><link rel="canonical" href="https://www.umi.homes/posts/2373/"><title>OMV+Jellyfin 打造个人影视库 - 折腾留档 | Umi's Blog = 乌弥的小屋 = 等待和希望，人类的智慧就包含在这两个词中</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">OMV+Jellyfin 打造个人影视库</h1><div class="meta"><span class="item" title="创建时间：2022-10-10 00:00:00"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2022-10-10T00:00:00+08:00">2022-10-10</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>6.4k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>6 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Umi's Blog</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><img src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/cover/pixiv-67863722.2z9ksqma0880.webp"></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 24 150 28" preserveaspectratio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/just-for-fun/" itemprop="item" rel="index" title="分类于 折腾留档"><span itemprop="name">折腾留档</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.umi.homes/posts/2373/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Umi"><meta itemprop="description" content="等待和希望，人类的智慧就包含在这两个词中, 乌弥的个人博客"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="乌弥的小屋"></span><div class="body md" itemprop="articleBody"><h2 id="关于-nas"><a class="markdownIt-Anchor" href="#关于-nas">#</a> 关于 nas</h2><p>NAS，全称 Network Attached Storage，翻译过来即为网络附属存储。简单来讲的话可以把它当作一个私人云盘来使用。<br>NAS 被定义为是一个以数据存储为中心的服务器，它首先具有数据集中存储和集中管理的功能，在这之上，它也可以做为一个私人专属的小服务器使用，实现诸如下载播放、家庭影院、软路由、虚拟机等功能。</p><h3 id="为什么要入手-nas"><a class="markdownIt-Anchor" href="#为什么要入手-nas">#</a> 为什么要入手 nas</h3><p><s>当然是吃饱了没事干瞎折腾。</s><br>虽然但是每个人对 nas 的理解和需求都不一样，对我个人来讲主要是更换了笔记本电脑后释放存储空间的需要和考虑搭建个人影视库的方便，另外则是对于网盘的不信任（<i>谁知道存在网盘里面的内容哪天就会打不开了呢？而百度的下载限速……emmm</i>）。<br>对于爱折腾的人来说，折腾 nas 的这个过程本身也可以是很有趣的，尤其是花费时间和精力后，实现了自己想要的功能后的满足感。</p><h3 id="成品机-or-diy"><a class="markdownIt-Anchor" href="#成品机-or-diy">#</a> 成品机 or DIY？</h3><h4 id="成品-nas"><a class="markdownIt-Anchor" href="#成品-nas">#</a> 成品 nas</h4><p>家用 nas 目前市面上其实已经有很多成熟的产品供人选择，且不说大家耳熟能详的群晖和威联通，新的产品还有万由云、极空间、绿联云等等，像是海康、联想、华为等厂商也推出了私人云产品。<br>成熟的 nas 产品，不仅是简单方便开箱即用，而且它们的功能和 app 适配也相对完善，售后服务等更是进一步提升了保障，省心省力。<br>当然，成品 nas 的缺点也很明显：一个是价格稍贵，另一个就是硬件上没有太多选择。像是<span class="exturl" data-url="aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDAwMTUwODc0MzEuaHRtbCNwcm9kdWN0LWRldGFpbA==">群晖最入门的双盘位 DS220j</span>，京东目前售价在 1400 元，<span class="exturl" data-url="aHR0cHM6Ly9pdGVtLmpkLmNvbS8xMDAwMTQxODcyODYuaHRtbCNwcm9kdWN0LWRldGFpbA==">支持 Docker 的 DS220+</span>则翻了一倍的价格，近 2800 元，而它的配置仅仅才是 J4025+2GB DDR4，也难怪大家常说成品 nas 是 “买软件送硬件”。</p><h4 id="diy"><a class="markdownIt-Anchor" href="#diy">#</a> DIY</h4><p>DIY 相对成品 nas 来说，在经济上有不小的优势。nas 本身也就是一台专门用于数据存储的电脑，一般家用电脑的配置也完全可以满足 nas 的要求，如果不介意使用二手硬件，去海鲜市场淘一下还能把硬件上的成本进一步降低。而且，基于不同的使用场景和不同的预算水平，DIY 的配置完全可以按需购入，而不是在 nas 厂家提供的选项中进行选择。<br>系统方面，DIY 除了使用破解版群晖系统 —— 也就是黑群晖外，较为常见的可供选择的开源系统有<span class="exturl" data-url="aHR0cHM6Ly93d3cudHJ1ZW5hcy5jb20v">TrueNas</span>和<span class="exturl" data-url="aHR0cHM6Ly93d3cub3Blbm1lZGlhdmF1bHQub3JnLw==">OpenMediaVault</span>，还有最近较为火热的<span class="exturl" data-url="aHR0cHM6Ly91bnJhaWQubmV0L3po">UNRAID</span>。如果习惯 windows 系统，可以考虑 windows server 或者直接 windows 宿主机 + 虚拟机 nas 系统的方法。<br>显然，DIY 就是个费时费力的活。不仅需要时间精力的投入，还需要 DIY 玩家有一定的技术水平。另外，在 nas 的 DIY 过程中或是日后的使用中，遇见的问题也只能依靠自己。</p><p>因此，如果只是需要一台基本功能的 nas，又不想太麻烦，同时经济上也相对较宽裕的，可以直接购买入门级的成品 nas。如果就是想折腾，用二手硬件甚至虚拟机先尝试一下 DIY 的 nas 系统也未尝不可。</p><h3 id="个人方案"><a class="markdownIt-Anchor" href="#个人方案">#</a> 个人方案</h3><p>成品 nas 的性价比确实不太美丽，DIY 的系统在尝试过 TrueNas 和 OMV 之后最终选择了后者。<br>硬件上，因为一开始的目的是希望搭建个人影视库，所以在尝试了 J1900 的矿渣蜗牛后，升级成了 G6900+h610i+8G DDR4。主板上有 4 个 SATA3 和 1 个 M.2，在机箱空间足够的情况下可以放下 4 块 HDD 和 1 个 SSD，并且可以通过预留给显卡的 PCIe 转接进一步扩展。系统盘则是做在了 32G 的 U 盘里面，这样能从主板上解放一个固态位。</p><h2 id="系统安装与设置"><a class="markdownIt-Anchor" href="#系统安装与设置">#</a> 系统安装与设置</h2><p>omv，全称为 openmediavault，是基于 Linux 内核的 Debian 构建的 nas 系统。omv 在安装上并没有太多困难的，但是因为它是系统与数据相分离的结构 —— 即系统要安装在独立的硬盘上，而我又不太想浪费一个 M.2 硬盘位来装一个 8G 都不到的系统，所以选择了用 U 盘安装。</p><h3 id="启动盘制作"><a class="markdownIt-Anchor" href="#启动盘制作">#</a> 启动盘制作</h3><p>镜像文件直接从<span class="exturl" data-url="aHR0cHM6Ly93d3cub3Blbm1lZGlhdmF1bHQub3JnLw==">OMV 官网</span>下载即可。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-download.2hbjzsq3p3c0.webp"><br>写入 U 盘，这里用的是 rufus，也有用 BalenaEtcher 的。写入完成后，引导盘就做好了。<br><img style="width:50%" data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-rufus.1keqkhuw88f4.webp"></p><h3 id="安装流程"><a class="markdownIt-Anchor" href="#安装流程">#</a> 安装流程</h3><p>将做好的引导 U 盘和安装为系统的 U 盘插到 USB 接口上，开机选择引导盘安装。<br>语言地区直接选择中文，中国就可以。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-install.70gqi9uiha80.webp"><br>安装过程中注意要插上网线。如果有多个网口会提示选择一个网口。<br>然后这里如果不进行修改的话可以直接回车，默认为 <code>openmediavault.local</code> 。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-install02.5o6y0v5b8qk0.webp"><br>之后是设置 root 密码，如果直接回车的话则会禁用 root 账户。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-install03.5i684oqglnw0.webp"><br>接下来如果有多个存储设备，会提示选择要安装的存储设备，这里选择需要安装的那个 U 盘。没有问题的话就开始系统的安装了。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-install04.3fo9h863so60.webp"><br>系统安装完成后会提示选择镜像，国内可以选择清华源。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-install05.6j9leomryv00.webp"><br>设置代理服务器，没有可以直接回车，然后等待安装完成。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-install06.5kci64bdon80.webp"><br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-install07.1fwkfwb70z1c.webp"><br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-install08.40k7sqcuzqw.webp"><br>安装完成后，<strong>先不要拔出引导盘</strong>，直接重启系统，选择刚才安装的系统盘启动，进入到命令行界面，再拔出引导盘，完成安装。<br>这里如果设置了 root 账户可以用 root 登录。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-install09.26yo76wa4cys.webp"><br>浏览器访问上面 IP 地址，如：192.168.70.128 即可进入 omv 管理界面。<br>默认账户 <code>admin</code> ，密码为 <code>openmediavault</code> 。<br>登录后配置仪表盘即如图所示。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-install10.51twito3vvo0.webp"><br>可以看见 SSH 服务是启动了的，因此我们可以用 windows 的 openSSH 客户端远程连接刚刚安装了 omv 的 nas 进行管理。<br>用命令提示符或者 powershell，输入 <code>ssh 用户@IP地址</code> ，然后登录。比如这里是 <code>ssh root@192.168.70.128</code><br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-install11.1njdplb06jkw.webp"></p><h3 id="设置共享文件夹"><a class="markdownIt-Anchor" href="#设置共享文件夹">#</a> 设置共享文件夹</h3><p>登录 omv 管理页面后，在右上角更改 admin 密码、设置语言和配置仪表盘。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-admin.4jp6og2wyra0.webp"><br>然后在<em>网络 - 接口</em>中，将 IPv4 从 DHCP 修改为静态 IP 方便访问。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-ip.6lyhea86p3o0.webp"><br>所有存储设备可以在<em>存储器 - 磁盘</em>中找到，这里为方便演示使用的是虚拟机。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-disk.5zjdgg2xdoc0.webp"><br>软 raid 个人因为只有两个硬盘所以做了镜像，可以按照自己实际情况选择。如果硬盘里面有内容会被格式化。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-raid.28l27jae23ms.webp"><br>然后到<em>文件系统</em>，点击左上角的<em>新建 | 挂载</em>，选择<em>创建</em>将设备挂载上。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-file-1.5f6zy3ss2ik0.webp"><br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-file-2.1jnrbj8gxkps.webp"><br>接着到<em>共享文件夹</em>，选择刚才挂载的文件系统进行共享。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-share-1.32r0r1tun720.webp"><br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-share-2.3nbyneld7x80.webp"><br>在<em>服务</em>中打开<em> SMB/CIFS</em>，选择<em>共享</em>将刚才的共享文件夹创建上去。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-share-3.3yzf38f9tbo0.webp"><br>为了方便管理，最好从<em>用户 - 用户</em>，新建一个用户使用共享文件。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-user.33neyiypd0i0.webp"><br>最后，在自己电脑上将共享文件夹添加上去，就可以使用 omv 的共享文件夹了。</p><h3 id="安装-clash"><a class="markdownIt-Anchor" href="#安装-clash">#</a> 安装 Clash</h3><h4 id="配置-clash"><a class="markdownIt-Anchor" href="#配置-clash">#</a> 配置 Clash</h4><p>在 Clash <span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL0RyZWFtYWNyby9jbGFzaC9yZWxlYXNlcw==">release</span>页面下载对应版本，例如 <code>clash-linux-amd64-v3-v1.11.8.gz</code> :<br><code># wget https://github.com/Dreamacro/clash/releases/download/v1.11.8/clash-linux-amd64-v3-v1.11.8.gz</code><br>然后解压缩并重命名为 <code>clash</code> ，添加可执行权限</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>gunzip clash-linux-amd64-v3-v1.11.8.gz      <span class="token comment">#解压缩</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">mv</span> clash-linux-amd64-v3-v1.11.8.gz clash    <span class="token comment">#重命名</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">chmod</span> u+x clash     <span class="token comment">#添加可执行权限</span></pre></td></tr></table></figure><p>之后通过 <code>./clash</code> 启动，第一次启动 clash 时会自动下载配置文件，位置在 <code>/.config/clash</code> 下。<br>使用网络服务商的服务，需要先找到提供的 clash 订阅链接，然后下载配置文件并保存到 <code>/.config/clash/config.yaml</code> 。</p><h4 id="配置开机启动"><a class="markdownIt-Anchor" href="#配置开机启动">#</a> 配置开机启动</h4><p>Linux 系统使用 systemd 作为启动服务器管理机制，首先把 Clash 可执行文件拷贝到 <code>/usr/local/bin</code> 目录，相关配置拷贝到 <code>/etc/clash</code> 目录。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">mkdir</span> /etc/clash</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">cp</span> clash /usr/local/bin</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">cp</span> config.yaml /etc/clash/</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">cp</span> Country.mmdb /etc/clash/</pre></td></tr></table></figure><p>创建 systemd 服务配置文件 <code>vim /etc/systemd/system/clash.service</code></p><figure class="highlight raw"><figcaption data-lang=""></figcaption><table><tr><td data-num="1"></td><td><pre>[Unit]</pre></td></tr><tr><td data-num="2"></td><td><pre>Description&#x3D;Clash daemon, A rule-based proxy in Go.</pre></td></tr><tr><td data-num="3"></td><td><pre>After&#x3D;network.target</pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>[Service]</pre></td></tr><tr><td data-num="6"></td><td><pre>Type&#x3D;simple</pre></td></tr><tr><td data-num="7"></td><td><pre>Restart&#x3D;always</pre></td></tr><tr><td data-num="8"></td><td><pre>ExecStart&#x3D;&#x2F;usr&#x2F;local&#x2F;bin&#x2F;clash -d &#x2F;etc&#x2F;clash</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>[Install]</pre></td></tr><tr><td data-num="11"></td><td><pre>WantedBy&#x3D;multi-user.target</pre></td></tr></table></figure><p>使用 systemctl 开启 clash</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>systemctl <span class="token builtin class-name">enable</span> clash      <span class="token comment">#clash 开机自启动</span></pre></td></tr><tr><td data-num="2"></td><td><pre>systemctl start clash       <span class="token comment">#开启 clash</span></pre></td></tr><tr><td data-num="3"></td><td><pre>systemctl status clash      <span class="token comment">#查看 clash 日志</span></pre></td></tr><tr><td data-num="4"></td><td><pre>journalctl <span class="token parameter variable">-xe</span></pre></td></tr></table></figure><h4 id="使用-webui"><a class="markdownIt-Anchor" href="#使用-webui">#</a> 使用 webUI</h4><p>如果要使用 webUI 进行管理，则将 clash dashboard 代码也克隆到 <code>/etc/clash</code> 目录<br><code>git clone -b gh-pages --depth 1 https://github.com/Dreamacro/clash-dashboard /etc/clash/clash-dashboard</code><br>同时修改 <code>config.yaml</code> 文件</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>external-controller: <span class="token number">0.0</span>.0.0:9090       <span class="token comment">#修改 ip 地址和端口；</span></pre></td></tr><tr><td data-num="2"></td><td><pre>external-ui: /etc/clash/clash-dashboard     <span class="token comment">#clash-dashboard 的路径；</span></pre></td></tr><tr><td data-num="3"></td><td><pre>secret:<span class="token string">'123456'</span>     <span class="token comment">#连接的密钥，自行设置；</span></pre></td></tr></table></figure><p>完成后重启 clash： <code>systemctl restart clash</code><br>之后访问 <code>本地地址:9090/ui</code> ，填写刚才设置的 host、端口和密钥即可。</p><h3 id="omv-其他设置"><a class="markdownIt-Anchor" href="#omv-其他设置">#</a> omv 其他设置</h3><p>官方自带的插件可以在<em>系统 - 插件</em>中找到。<br>国内使用清华镜像源可以参考<span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuL2hlbHAvb3Blbm1lZGlhdmF1bHQv">官方设置</span>。</p><h2 id="启用-docker"><a class="markdownIt-Anchor" href="#启用-docker">#</a> 启用 docker</h2><p>当然，仅靠 omv 自带的功能和系统插件，能实现的效果还是不够，这就需要使用 docker 了。</p><h3 id="安装-omv-extras"><a class="markdownIt-Anchor" href="#安装-omv-extras">#</a> 安装 omv-extras</h3><p>omv 要启用 docker 并在 web 端进行管理的话需要安装 omv-extras。<br><span class="exturl" data-url="aHR0cHM6Ly9mb3J1bS5vcGVubWVkaWF2YXVsdC5vcmcvaW5kZXgucGhwP3RocmVhZC81NTQ5LW9tdi1leHRyYXMtb3JnLXBsdWdpbi8=">官网地址</span><br><span class="exturl" data-url="aHR0cHM6Ly9taXJyb3JzLnR1bmEudHNpbmdodWEuZWR1LmNuL09wZW5NZWRpYVZhdWx0L29wZW5tZWRpYXZhdWx0LXBsdWdpbi1kZXZlbG9wZXJzL3Bvb2wvbWFpbi9vL29wZW5tZWRpYXZhdWx0LW9tdmV4dHJhc29yZy8=">清华大学源</span><br>国内还是选择清华大学源。选择对应版本的安装包下载。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-extras-1.32zh0cwg9vo.webp"></p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 命令行安装</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">wget</span> https://mirrors.tuna.tsinghua.edu.cn/OpenMediaVault/openmediavault-plugin-developers/pool/main/o/openmediavault-omvextrasorg/openmediavault-omvextrasorg_6.1.1_all.deb</pre></td></tr><tr><td data-num="3"></td><td><pre>dpkg <span class="token parameter variable">-i</span> openmediavault-omvextrasorg_6.1.1_all.deb</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 安装后会提示缺少依赖，按照提示继续输入</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">apt</span> --fix-broken <span class="token function">install</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment"># 修复依赖关系，然后把系统更新到最新。</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">apt</span> update <span class="token operator">&amp;&amp;</span> <span class="token function">apt</span> upgrade</pre></td></tr></table></figure><p>然后刷新 omv 网页管理界面，已经有 omv-extras 选项了。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-extras-2.3y09mp2chec0.webp"></p><h3 id="安装-docker"><a class="markdownIt-Anchor" href="#安装-docker">#</a> 安装 docker</h3><p>安装完成 omv-extras 可以直接在里面安装 docker 和 portainer，后者是一个可视化的 Docker 操作界面。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-docker-1.1l29r4p899wg.webp"><br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-docker-2.48vygos3biw0.webp"><br>安装完成后在 omv 的 9000 端口打开，如此处 <code>192.168.70.128:9000</code> ，这里可以进行 docker 镜像和容器的管理。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/omv-docker-3.74lbgs5a84c0.webp"></p><h2 id="jellyfin"><a class="markdownIt-Anchor" href="#jellyfin">#</a> Jellyfin</h2><p><span class="exturl" data-url="aHR0cHM6Ly9qZWxseWZpbi5vcmcv">Jellyfin</span>是一套多媒体应用程序软件套装，旨在组织、管理和共享数字媒体文件，是 Emby 的一个自由开源分叉。<br>这里在服务端安装的 jellyfin 使用的是<span class="exturl" data-url="aHR0cHM6Ly9odWIuZG9ja2VyLmNvbS9yL255YW5taXNha2EvamVsbHlmaW4=">中国特供版的镜像</span>，它已经打包好了 Intel 驱动（用于使用 QSV 硬解转码）、jellyfin-ffmpeg、补丁、CJK 系统字体等，可以实现开箱即用，免去折腾驱动，中文字体等麻烦。</p><h3 id="运行容器"><a class="markdownIt-Anchor" href="#运行容器">#</a> 运行容器</h3><p>首先拉取容器最新镜像 <code>docker pull nyanmisaka/jellyfin</code><br>然后这里采用 <code>portainer</code> 安装：<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/jellyfin-install.4wgpta3l9uw0.webp"><br>然后参考<span class="exturl" data-url="aHR0cHM6Ly9qZWxseWZpbi5vcmcvZG9jcy9nZW5lcmFsL2FkbWluaXN0cmF0aW9uL2luc3RhbGxpbmcuaHRtbA==">Jellyfin 官网</span>在 <code>docker compose file</code> 中填入：</p><figure class="highlight raw"><figcaption data-lang=""></figcaption><table><tr><td data-num="1"></td><td><pre>version: &quot;3.5&quot;</pre></td></tr><tr><td data-num="2"></td><td><pre>services:</pre></td></tr><tr><td data-num="3"></td><td><pre>  jellyfin:</pre></td></tr><tr><td data-num="4"></td><td><pre>    image: nyanmisaka&#x2F;jellyfin:latest   #使用中国特供版镜像</pre></td></tr><tr><td data-num="5"></td><td><pre>    container_name: jellyfin</pre></td></tr><tr><td data-num="6"></td><td><pre>    environment:</pre></td></tr><tr><td data-num="7"></td><td><pre>      - PUID&#x3D;1000</pre></td></tr><tr><td data-num="8"></td><td><pre>      - PGID&#x3D;100</pre></td></tr><tr><td data-num="9"></td><td><pre>      - TZ&#x3D;Asia&#x2F;Shanghai    #时区使用 Asia&#x2F;Shanghai</pre></td></tr><tr><td data-num="10"></td><td><pre>      - JELLYFIN_PublishedServerUrl&#x3D;192.168.0.5 #optional</pre></td></tr><tr><td data-num="11"></td><td><pre>    volumes:    #修改磁盘映射</pre></td></tr><tr><td data-num="12"></td><td><pre>      - &#x2F;path&#x2F;to&#x2F;config:&#x2F;config #对应配置文件</pre></td></tr><tr><td data-num="13"></td><td><pre>      - &#x2F;path&#x2F;to&#x2F;cache:&#x2F;cache   #对应缓存</pre></td></tr><tr><td data-num="14"></td><td><pre>      - &#x2F;path&#x2F;to&#x2F;media:&#x2F;media   #对应媒体文件</pre></td></tr><tr><td data-num="15"></td><td><pre>      - &#x2F;path&#x2F;to&#x2F;media2:&#x2F;media2:ro</pre></td></tr><tr><td data-num="16"></td><td><pre>    ports:</pre></td></tr><tr><td data-num="17"></td><td><pre>      - 8096:8096 #webUI 端口</pre></td></tr><tr><td data-num="18"></td><td><pre>      - 8920:8920 #optional</pre></td></tr><tr><td data-num="19"></td><td><pre>      - 7359:7359&#x2F;udp #optional</pre></td></tr><tr><td data-num="20"></td><td><pre>      - 1900:1900&#x2F;udp #optional</pre></td></tr><tr><td data-num="21"></td><td><pre>    devices:</pre></td></tr><tr><td data-num="22"></td><td><pre>      - &#x2F;dev&#x2F;dri:&#x2F;dev&#x2F;dri   #Intel 集显驱动</pre></td></tr><tr><td data-num="23"></td><td><pre>    restart: unless-stopped</pre></td></tr></table></figure><p>填写完成后点击 <code>Deploy the stack</code> 即可。<br>之后访问 <code>本地地址:8096</code> 端口，成功部署运行会进入 jellyfin 登录界面。</p><h3 id="设置-jellyfin"><a class="markdownIt-Anchor" href="#设置-jellyfin">#</a> 设置 jellyfin</h3><p>进入 web 页面设置其实没什么好记录的，基本上按照顺序把媒体库设置好就可以了。<br>硬件转码在<em>控制台 - 播放</em>中开启。<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/jellyfin-set.ejnbskcbgvc.webp"><br>需要注意的是，为了能正确搜刮到元数据的话，对应媒体库的命名尽量参考<span class="exturl" data-url="aHR0cHM6Ly9qZWxseWZpbi5vcmcvZG9jcy9nZW5lcmFsL3NlcnZlci9tZWRpYS9zaG93cy5odG1s">Jellyfin 推荐命名</span>和<span class="exturl" data-url="aHR0cHM6Ly93d3cudGhlbW92aWVkYi5vcmcv">TheMovieDB 剧集</span>来进行。<br>举例说明：<br>如路人女主是两季 TV + 剧场版，两季 TV 中各有一集 OVA。但是查询 themoviedb 发现 ova 剧集是单独放在特别篇中的：<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/jellyfin-metadata01.4xd0h5aq6lq0.webp"><br>因此两季的 ova 应该被单独拿出来放在 <code>S00</code> 文件夹中，文件目录应该如下：</p><figure class="highlight raw"><figcaption data-lang=""></figcaption><table><tr><td data-num="1"></td><td><pre>动画</pre></td></tr><tr><td data-num="2"></td><td><pre>└── 路人女主的养成方法</pre></td></tr><tr><td data-num="3"></td><td><pre>    ├── S00</pre></td></tr><tr><td data-num="4"></td><td><pre>    │   ├── S00E01.mkv #第一季 ova</pre></td></tr><tr><td data-num="5"></td><td><pre>    │   └── S00E02.mkv #第二季 ova</pre></td></tr><tr><td data-num="6"></td><td><pre>    ├── S01</pre></td></tr><tr><td data-num="7"></td><td><pre>    │   ├── S01E01.mkv</pre></td></tr><tr><td data-num="8"></td><td><pre>    │   ├── S01E02.mkv</pre></td></tr><tr><td data-num="9"></td><td><pre>    │   ├── S01E03.mkv</pre></td></tr><tr><td data-num="10"></td><td><pre>    │   └── ...</pre></td></tr><tr><td data-num="11"></td><td><pre>    └── S02</pre></td></tr><tr><td data-num="12"></td><td><pre>        ├── S02E01.mkv</pre></td></tr><tr><td data-num="13"></td><td><pre>        └── S02E02.mkv</pre></td></tr><tr><td data-num="14"></td><td><pre>        └── ...</pre></td></tr></table></figure><p>正确识别搜刮的元数据如下：<br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/jellyfin-metadata02.50j4sdsl9280.webp"><br><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/jellyfin-metadata03.7gbfm29jmkc0.webp"></p><p>插件上除了使用官方的插件库外还有如下几个：</p><figure class="highlight raw"><figcaption data-lang=""></figcaption><table><tr><td data-num="1"></td><td><pre># 用于从 bangumi 番组计划搜刮元数据</pre></td></tr><tr><td data-num="2"></td><td><pre>https:&#x2F;&#x2F;jellyfin-plugin-bangumi.pages.dev&#x2F;repository.json</pre></td></tr><tr><td data-num="3"></td><td><pre># 用于从豆瓣搜刮元数据</pre></td></tr><tr><td data-num="4"></td><td><pre>https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;caryyu&#x2F;jellyfin-plugin-repo&#x2F;master&#x2F;manifest-us.json</pre></td></tr><tr><td data-num="5"></td><td><pre># 一个 jellyfin 主题管理插件</pre></td></tr><tr><td data-num="6"></td><td><pre>https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;danieladov&#x2F;JellyfinPluginManifest&#x2F;master&#x2F;manifest.json</pre></td></tr></table></figure><img data-src="https://cdn.staticaly.com/gh/umitsurumi/image-hosting@master/blog-images/other_note/jellyfin-plugin.6uxg0y7jskk0.webp"><h2 id="参考"><a class="markdownIt-Anchor" href="#参考">#</a> 参考</h2><ol><li><span class="exturl" data-url="aHR0cHM6Ly9wb3N0LnNtemRtLmNvbS9wL2F2N3oyNTY0Lw==">OMV 安装：系统安装设置及一些功能的开启</span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuY2hpcGhlbGwuY29tL3RocmVhZC0yMzc1Nzc3LTEtMS5odG1s">] Jellyfin 中国特供版 + Docker 镜像，含驱动，免折腾开箱即用</span></li><li><span class="exturl" data-url="aHR0cHM6Ly96aHVhbmxhbi56aGlodS5jb20vcC8zNjM2NTI4OTk=">omv 家用 nas 搭建 [4]， jellyfin 部署</span></li><li><span class="exturl" data-url="aHR0cHM6Ly93d3cuaGltaWt1LmNvbS9hcmNoaXZlcy9kZXBsb3ktYS1tb3JlLWNvbWZvcnRhYmxlLWFuaW1hdGlvbi1saWJyYXJ5LXdpdGgtamVsbHlmaW4tYW5kLWJhbmd1bWkuaHRtbA==">利用 Jellyfin + Bangumi 打造更舒适的动画媒体库</span></li><li><span class="exturl" data-url="aHR0cHM6Ly9qZWxseWZpbi5vcmcvZG9jcy9nZW5lcmFsL3NlcnZlci9tZWRpYS9zaG93cy5odG1s">Jellyfin 节目命名指南</span></li></ol><div class="tags"><a href="/tags/omv/" rel="tag"><i class="ic i-tag"></i> omv</a> <a href="/tags/jellyfin/" rel="tag"><i class="ic i-tag"></i> jellyfin</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-02-23 16:49:36" itemprop="dateModified" datetime="2023-02-23T16:49:36+08:00">2023-02-23</time> </span><span id="posts/2373/" class="item leancloud_visitors" data-flag-title="OMV+Jellyfin 打造个人影视库" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span>此文章已被阅读次数: </span><span id="twikoo_visitors">正在加载...</span></span></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Umi <i class="ic i-at"><em>@</em></i>乌弥的小屋</li><li class="link"><strong>本文链接：</strong> <a href="https://www.umi.homes/posts/2373/" title="OMV+Jellyfin 打造个人影视库">https://www.umi.homes/posts/2373/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/posts/3de/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;cdn.staticaly.com&#x2F;gh&#x2F;umitsurumi&#x2F;image-hosting@master&#x2F;cover&#x2F;pixiv-62684435.2g7a7knmoda8.webp" title="读书笔记-《费曼学习法》"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 读书笔记</span><h3>读书笔记-《费曼学习法》</h3></a></div><div class="item right"><a href="/posts/62621/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;cdn.staticaly.com&#x2F;gh&#x2F;umitsurumi&#x2F;image-hosting@master&#x2F;cover&#x2F;pixiv-39932159.611ml74npe80.webp" title="CSS基础知识"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 前端基础</span><h3>CSS基础知识</h3></a></div></div><div class="wrap"><div id="tcomments"></div></div><script src="https://cdn.staticfile.org/twikoo/1.6.9/twikoo.all.min.js"></script><script data-pjax>setTimeout(function(){twikoo.init({envId:"https://twikoo.umi.homes",el:"#tcomments"})},1e3)</script></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8E-nas"><span class="toc-number">1.</span> <span class="toc-text">关于 nas</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%85%A5%E6%89%8B-nas"><span class="toc-number">1.1.</span> <span class="toc-text">为什么要入手 nas</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%90%E5%93%81%E6%9C%BA-or-diy"><span class="toc-number">1.2.</span> <span class="toc-text">成品机 or DIY？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%93%81-nas"><span class="toc-number">1.2.1.</span> <span class="toc-text">成品 nas</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#diy"><span class="toc-number">1.2.2.</span> <span class="toc-text">DIY</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E6%96%B9%E6%A1%88"><span class="toc-number">1.3.</span> <span class="toc-text">个人方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E4%B8%8E%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">系统安装与设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E7%9B%98%E5%88%B6%E4%BD%9C"><span class="toc-number">2.1.</span> <span class="toc-text">启动盘制作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B"><span class="toc-number">2.2.</span> <span class="toc-text">安装流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">2.3.</span> <span class="toc-text">设置共享文件夹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-clash"><span class="toc-number">2.4.</span> <span class="toc-text">安装 Clash</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE-clash"><span class="toc-number">2.4.1.</span> <span class="toc-text">配置 Clash</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><span class="toc-number">2.4.2.</span> <span class="toc-text">配置开机启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-webui"><span class="toc-number">2.4.3.</span> <span class="toc-text">使用 webUI</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#omv-%E5%85%B6%E4%BB%96%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.5.</span> <span class="toc-text">omv 其他设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E7%94%A8-docker"><span class="toc-number">3.</span> <span class="toc-text">启用 docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-omv-extras"><span class="toc-number">3.1.</span> <span class="toc-text">安装 omv-extras</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-docker"><span class="toc-number">3.2.</span> <span class="toc-text">安装 docker</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#jellyfin"><span class="toc-number">4.</span> <span class="toc-text">Jellyfin</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8"><span class="toc-number">4.1.</span> <span class="toc-text">运行容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE-jellyfin"><span class="toc-number">4.2.</span> <span class="toc-text">设置 jellyfin</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">5.</span> <span class="toc-text">参考</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/posts/58410/" rel="bookmark" title="gitpage笔记">gitpage笔记</a></li><li class="active"><a href="/posts/2373/" rel="bookmark" title="OMV+Jellyfin打造个人影视库">OMV+Jellyfin打造个人影视库</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Umi" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Umi</p><div class="description" itemprop="description">乌弥的个人博客</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">21</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">7</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">14</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL3VtaXRzdXJ1bWk=" title="https:&#x2F;&#x2F;github.com&#x2F;umitsurumi"><i class="ic i-github"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20veW91cm5hbWU=" title="https:&#x2F;&#x2F;weibo.com&#x2F;yourname"><i class="ic i-weibo"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS95b3VybmFtZQ==" title="https:&#x2F;&#x2F;about.me&#x2F;yourname"><i class="ic i-address-card"></i></span> <span class="exturl item email" data-url="bWFpbHRvOnlvdXJuYW1lQG1haWwuY29t" title="mailto:yourname@mail.com"><i class="ic i-envelope"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item dropdown"><a href="javascript:void(0);" rel="external nofollow noreferrer"><i class="ic i-magic"></i>链接</a><ul class="submenu"><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li><li class="item"><a href="/favorites/" rel="section"><i class="ic i-star"></i>收藏</a></li></ul></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/posts/3de/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/posts/62621/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"></div><div class="status"><div class="copyright">&copy; 2022 – <span itemprop="copyrightYear">2023</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Umi @ Umi's Blog</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">149k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">2:15</span></div><div class="icp"><a target="_blank" rel="noopener external nofollow noreferrer" href="https://icp.gov.moe/?keyword=20221331">萌ICP备20221331</a></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"posts/2373/",favicon:{show:"（●´3｀●）复活成功",hide:"(´Д｀)浏览器崩溃啦"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!1,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@9/dist/mermaid.esm.min.mjs';
  mermaid.initialize({ startOnLoad: true, theme: 'forest' });</script></body></html><!-- rebuild by hrmmi -->
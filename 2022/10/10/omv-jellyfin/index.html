
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OMV+Jellyfin打造个人影视库 - 乌弥的小屋</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Umi&#39;s Home,"> 
    <meta name="description" content="从到蜗牛星际到自组nas的小总结。
关于nasNAS，全称Network Attached Storage，翻译过来即为网络附属存储。简单来讲的话可以把它当作一个私人云盘来使用。NAS被定义为是一个,"> 
    <meta name="author" content="Umi"> 
    <link rel="alternative" href="atom.xml" title="乌弥的小屋" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
    
    
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:title" content="OMV+Jellyfin打造个人影视库 - 乌弥的小屋"/>
    <meta name="twitter:description" content="从到蜗牛星际到自组nas的小总结。
关于nasNAS，全称Network Attached Storage，翻译过来即为网络附属存储。简单来讲的话可以把它当作一个私人云盘来使用。NAS被定义为是一个,"/>
    
    
    
    
    <meta property="og:site_name" content="乌弥的小屋"/>
    <meta property="og:type" content="object"/>
    <meta property="og:title" content="OMV+Jellyfin打造个人影视库 - 乌弥的小屋"/>
    <meta property="og:description" content="从到蜗牛星际到自组nas的小总结。
关于nasNAS，全称Network Attached Storage，翻译过来即为网络附属存储。简单来讲的话可以把它当作一个私人云盘来使用。NAS被定义为是一个,"/>
    
<link rel="stylesheet" href="/css/diaspora.css">

    <script>window.searchDbPath = "/search.xml";</script>
<meta name="generator" content="Hexo 5.4.2"></head>

<body class="loading">
    <span id="config-title" style="display:none">乌弥的小屋</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="iconfont icon-home image-icon" href="javascript:;" data-url="https://umitsurumi.github.io"></a>
    <div title="播放/暂停" class="iconfont icon-play"></div>
    <h3 class="subtitle">OMV+Jellyfin打造个人影视库</h3>
    <div class="social">
        <div>
            <div class="share">
                <a title="获取二维码" class="iconfont icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">OMV+Jellyfin打造个人影视库</h1>
        <div class="stuff">
            <span>十月 10, 2022</span>
            
  <ul class="post-tags-list" itemprop="keywords"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/jellyfin/" rel="tag">jellyfin</a></li><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/omv/" rel="tag">omv</a></li></ul>


        </div>
        <div class="content markdown">
            <p>从到蜗牛星际到自组nas的小总结。</p>
<h2 id="关于nas"><a href="#关于nas" class="headerlink" title="关于nas"></a>关于nas</h2><p>NAS，全称Network Attached Storage，翻译过来即为网络附属存储。简单来讲的话可以把它当作一个私人云盘来使用。<br>NAS被定义为是一个以数据存储为中心的服务器，它首先具有数据集中存储和集中管理的功能，在这之上，它也可以做为一个私人专属的小服务器使用，实现诸如下载播放、家庭影院、软路由、虚拟机等功能。</p>
<h3 id="为什么要入手nas"><a href="#为什么要入手nas" class="headerlink" title="为什么要入手nas"></a>为什么要入手nas</h3><p><del>当然是吃饱了没事干瞎折腾。</del><br>虽然但是每个人对nas的理解和需求都不一样，对我个人来讲主要是更换了笔记本电脑后释放存储空间的需要和考虑搭建个人影视库的方便，另外则是对于网盘的不信任（<i>谁知道存在网盘里面的内容哪天就会打不开了呢？而百度的下载限速……emmm</i>）。<br>对于爱折腾的人来说，折腾nas的这个过程本身也可以是很有趣的，尤其是花费时间和精力后，实现了自己想要的功能后的满足感。</p>
<h3 id="成品机-or-DIY？"><a href="#成品机-or-DIY？" class="headerlink" title="成品机 or DIY？"></a>成品机 or DIY？</h3><h4 id="成品nas"><a href="#成品nas" class="headerlink" title="成品nas"></a>成品nas</h4><p>家用nas目前市面上其实已经有很多成熟的产品供人选择，且不说大家耳熟能详的群晖和威联通，新的产品还有万由云、极空间、绿联云等等，像是海康、联想、华为等厂商也推出了私人云产品。<br>成熟的nas产品，不仅是简单方便开箱即用，而且它们的功能和app适配也相对完善，售后服务等更是进一步提升了保障，省心省力。<br>当然，成品nas的缺点也很明显：一个是价格稍贵，另一个就是硬件上没有太多选择。像是<a target="_blank" rel="noopener" href="https://item.jd.com/100015087431.html#product-detail">群晖最入门的双盘位DS220j</a>，京东目前售价在1400元，<a target="_blank" rel="noopener" href="https://item.jd.com/100014187286.html#product-detail">支持Docker的DS220+</a>则翻了一倍的价格，近2800元，而它的配置仅仅才是J4025+2GB DDR4，也难怪大家常说成品nas是“买软件送硬件”。</p>
<h4 id="DIY"><a href="#DIY" class="headerlink" title="DIY"></a>DIY</h4><p>DIY相对成品nas来说，在经济上有不小的优势。nas本身也就是一台专门用于数据存储的电脑，一般家用电脑的配置也完全可以满足nas的要求，如果不介意使用二手硬件，去海鲜市场淘一下还能把硬件上的成本进一步降低。而且，基于不同的使用场景和不同的预算水平，DIY的配置完全可以按需购入，而不是在nas厂家提供的选项中进行选择。<br>系统方面，DIY除了使用破解版群晖系统——也就是黑群晖外，较为常见的可供选择的开源系统有<a target="_blank" rel="noopener" href="https://www.truenas.com/">TrueNas</a>和<a target="_blank" rel="noopener" href="https://www.openmediavault.org/">OpenMediaVault</a>，还有最近较为火热的<a target="_blank" rel="noopener" href="https://unraid.net/zh">UNRAID</a>。如果习惯windows系统，可以考虑windows server或者直接windows宿主机+虚拟机nas系统的方法。<br>显然，DIY就是个费时费力的活。不仅需要时间精力的投入，还需要DIY玩家有一定的技术水平。另外，在nas的DIY过程中或是日后的使用中，遇见的问题也只能依靠自己。</p>
<p>因此，如果只是需要一台基本功能的nas，又不想太麻烦，同时经济上也相对较宽裕的，可以直接购买入门级的成品nas。如果就是想折腾，用二手硬件甚至虚拟机先尝试一下DIY的nas系统也未尝不可。</p>
<h3 id="个人方案"><a href="#个人方案" class="headerlink" title="个人方案"></a>个人方案</h3><p>成品nas的性价比确实不太美丽，DIY的系统在尝试过TrueNas和OMV之后最终选择了后者。<br>硬件上，因为一开始的目的是希望搭建个人影视库，所以在尝试了J1900的矿渣蜗牛后，升级成了G6900+h610i+8G DDR4。主板上有4个SATA3和1个M.2，在机箱空间足够的情况下可以放下4块HDD和1个SSD，并且可以通过预留给显卡的PCIe转接进一步扩展。系统盘则是做在了32G的U盘里面，这样能从主板上解放一个固态位。</p>
<h2 id="系统安装与设置"><a href="#系统安装与设置" class="headerlink" title="系统安装与设置"></a>系统安装与设置</h2><p>omv，全称为openmediavault，是基于Linux内核的Debian构建的nas系统。omv在安装上并没有太多困难的，但是因为它是系统与数据相分离的结构——即系统要安装在独立的硬盘上，而我又不太想浪费一个M.2硬盘位来装一个8G都不到的系统，所以选择了用U盘安装。</p>
<h3 id="启动盘制作"><a href="#启动盘制作" class="headerlink" title="启动盘制作"></a>启动盘制作</h3><p>镜像文件直接从<a target="_blank" rel="noopener" href="https://www.openmediavault.org/">OMV官网</a>下载即可。<br><img src="/blogs-image/omv-jellyfin/omv-download.png"><br>写入U盘，这里用的是rufus，也有用BalenaEtcher的。写入完成后，引导盘就做好了。<br><img style="width:50%;" src="/blogs-image/omv-jellyfin/omv-rufus.png"></p>
<h3 id="安装流程"><a href="#安装流程" class="headerlink" title="安装流程"></a>安装流程</h3><p>将做好的引导U盘和安装为系统的U盘插到USB接口上，开机选择引导盘安装。<br>语言地区直接选择中文，中国就可以。<br><img src="/blogs-image/omv-jellyfin/omv-install.png"><br>安装过程中注意要插上网线。如果有多个网口会提示选择一个网口。<br>然后这里如果不进行修改的话可以直接回车，默认为<code>openmediavault.local</code>。<br><img src="/blogs-image/omv-jellyfin/omv-install02.png"><br>之后是设置root密码，如果直接回车的话则会禁用root账户。<br><img src="/blogs-image/omv-jellyfin/omv-install03.png"><br>接下来如果有多个存储设备，会提示选择要安装的存储设备，这里选择需要安装的那个U盘。没有问题的话就开始系统的安装了。<br><img src="/blogs-image/omv-jellyfin/omv-install04.png"><br>系统安装完成后会提示选择镜像，国内可以选择清华源。<br><img src="/blogs-image/omv-jellyfin/omv-install05.png"><br>设置代理服务器，没有可以直接回车，然后等待安装完成。<br><img src="/blogs-image/omv-jellyfin/omv-install06.png"><br><img src="/blogs-image/omv-jellyfin/omv-install07.png"><br><img src="/blogs-image/omv-jellyfin/omv-install08.png"><br>安装完成后，<strong>先不要拔出引导盘</strong>，直接重启系统，选择刚才安装的系统盘启动，进入到命令行界面，再拔出引导盘，完成安装。<br>这里如果设置了root账户可以用root登录。<br><img src="/blogs-image/omv-jellyfin/omv-install09.png"><br>浏览器访问上面IP地址，如：192.168.70.128即可进入omv管理界面。<br>默认账户<code>admin</code>，密码为<code>openmediavault</code>。<br>登录后配置仪表盘即如图所示。<br><img src="/blogs-image/omv-jellyfin/omv-install10.png"><br>可以看见SSH服务是启动了的，因此我们可以用windows的openSSH客户端远程连接刚刚安装了omv的nas进行管理。<br>用命令提示符或者powershell，输入<code>ssh 用户@IP地址</code>，然后登录。比如这里是<code>ssh root@192.168.70.128</code><br><img src="/blogs-image/omv-jellyfin/omv-install11.png"></p>
<h3 id="设置共享文件夹"><a href="#设置共享文件夹" class="headerlink" title="设置共享文件夹"></a>设置共享文件夹</h3><p>登录omv管理页面后，在右上角更改admin密码、设置语言和配置仪表盘。<br><img src="/blogs-image/omv-jellyfin/omv-admin.png"><br>然后在<em>网络-接口</em>中，将IPv4从DHCP修改为静态IP方便访问。<br><img src="/blogs-image/omv-jellyfin/omv-ip.png"><br>所有存储设备可以在<em>存储器-磁盘</em>中找到，这里为方便演示使用的是虚拟机。<br><img src="/blogs-image/omv-jellyfin/omv-disk.png"><br>软raid个人因为只有两个硬盘所以做了镜像，可以按照自己实际情况选择。如果硬盘里面有内容会被格式化。<br><img src="/blogs-image/omv-jellyfin/omv-raid.png"><br>然后到<em>文件系统</em>，点击左上角的<em>新建|挂载</em>，选择<em>创建</em>将设备挂载上。<br><img src="/blogs-image/omv-jellyfin/omv-file-1.png"><br><img src="/blogs-image/omv-jellyfin/omv-file-2.png"><br>接着到<em>共享文件夹</em>，选择刚才挂载的文件系统进行共享。<br><img src="/blogs-image/omv-jellyfin/omv-share-1.png"><br><img src="/blogs-image/omv-jellyfin/omv-share-2.png"><br>在<em>服务</em>中打开<em>SMB/CIFS</em>，选择<em>共享</em>将刚才的共享文件夹创建上去。<br><img src="/blogs-image/omv-jellyfin/omv-share-3.png"><br>为了方便管理，最好从<em>用户-用户</em>，新建一个用户使用共享文件。<br><img src="/blogs-image/omv-jellyfin/omv-user.png"><br>最后，在自己电脑上将共享文件夹添加上去，就可以使用omv的共享文件夹了。</p>
<h3 id="安装Clash"><a href="#安装Clash" class="headerlink" title="安装Clash"></a>安装Clash</h3><h4 id="配置Clash"><a href="#配置Clash" class="headerlink" title="配置Clash"></a>配置Clash</h4><p>在Clash <a target="_blank" rel="noopener" href="https://github.com/Dreamacro/clash/releases">release</a>页面下载对应版本，例如<code>clash-linux-amd64-v3-v1.11.8.gz</code>:<br><code># wget https://github.com/Dreamacro/clash/releases/download/v1.11.8/clash-linux-amd64-v3-v1.11.8.gz</code><br>然后解压缩并重命名为<code>clash</code>，添加可执行权限</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gunzip clash-linux-amd64-v3-v1.11.8.gz      #解压缩</span><br><span class="line">mv clash-linux-amd64-v3-v1.11.8.gz clash    #重命名</span><br><span class="line">chmod u+x clash     #添加可执行权限</span><br></pre></td></tr></table></figure>
<p>之后通过<code>./clash</code>启动，第一次启动clash时会自动下载配置文件，位置在<code>/.config/clash</code>下。<br>使用网络服务商的服务，需要先找到提供的clash订阅链接，然后下载配置文件并保存到<code>/.config/clash/config.yaml</code>。</p>
<h4 id="配置开机启动"><a href="#配置开机启动" class="headerlink" title="配置开机启动"></a>配置开机启动</h4><p>Linux 系统使用 systemd 作为启动服务器管理机制，首先把 Clash 可执行文件拷贝到<code>/usr/local/bin</code>目录，相关配置拷贝到<code>/etc/clash</code>目录。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mkdir /etc/clash</span><br><span class="line">cp clash /usr/local/bin</span><br><span class="line">cp config.yaml /etc/clash/</span><br><span class="line">cp Country.mmdb /etc/clash/</span><br></pre></td></tr></table></figure>

<p>创建systemd服务配置文件<code>vim /etc/systemd/system/clash.service</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[Unit]</span><br><span class="line">Description=Clash daemon, A rule-based proxy in Go.</span><br><span class="line">After=network.target</span><br><span class="line"></span><br><span class="line">[Service]</span><br><span class="line">Type=simple</span><br><span class="line">Restart=always</span><br><span class="line">ExecStart=/usr/local/bin/clash -d /etc/clash</span><br><span class="line"></span><br><span class="line">[Install]</span><br><span class="line">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure>

<p>使用systemctl开启clash</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable clash      #clash开机自启动</span><br><span class="line">systemctl start clash       #开启clash</span><br><span class="line">systemctl status clash      #查看clash日志</span><br><span class="line">journalctl -xe</span><br></pre></td></tr></table></figure>
<h4 id="使用webUI"><a href="#使用webUI" class="headerlink" title="使用webUI"></a>使用webUI</h4><p>如果要使用webUI进行管理，则将clash dashboard代码也克隆到<code>/etc/clash</code>目录<br><code>git clone -b gh-pages --depth 1 https://github.com/Dreamacro/clash-dashboard /etc/clash/clash-dashboard </code><br>同时修改<code>config.yaml</code>文件</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">external-controller: 0.0.0.0:9090       #修改ip地址和端口；</span><br><span class="line">external-ui: /etc/clash/clash-dashboard     #clash-dashboard的路径；</span><br><span class="line">secret:&#x27;123456&#x27;     #连接的密钥，自行设置；</span><br></pre></td></tr></table></figure>
<p>完成后重启clash：<code>systemctl restart clash </code><br>之后访问<code>本地地址:9090/ui</code>，填写刚才设置的host、端口和密钥即可。</p>
<h3 id="omv其他设置"><a href="#omv其他设置" class="headerlink" title="omv其他设置"></a>omv其他设置</h3><p>官方自带的插件可以在<em>系统-插件</em>中找到。<br>国内使用清华镜像源可以参考<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/help/openmediavault/">官方设置</a>。</p>
<h2 id="启用docker"><a href="#启用docker" class="headerlink" title="启用docker"></a>启用docker</h2><p>当然，仅靠omv自带的功能和系统插件，能实现的效果还是不够，这就需要使用docker了。</p>
<h3 id="安装omv-extras"><a href="#安装omv-extras" class="headerlink" title="安装omv-extras"></a>安装omv-extras</h3><p>omv要启用docker并在web端进行管理的话需要安装omv-extras。<br>官网地址：<a target="_blank" rel="noopener" href="https://forum.openmediavault.org/index.php?thread/5549-omv-extras-org-plugin/">https://forum.openmediavault.org/index.php?thread/5549-omv-extras-org-plugin/</a><br>清华大学源：<a target="_blank" rel="noopener" href="https://mirrors.tuna.tsinghua.edu.cn/OpenMediaVault/openmediavault-plugin-developers/pool/main/o/openmediavault-omvextrasorg/">https://mirrors.tuna.tsinghua.edu.cn/OpenMediaVault/openmediavault-plugin-developers/pool/main/o/openmediavault-omvextrasorg/</a><br>国内还是选择清华大学源。选择对应版本的安装包下载。<br><img src="/blogs-image/omv-jellyfin/omv-extras-1.png"><br>命令行安装<br><code>wget https://mirrors.tuna.tsinghua.edu.cn/OpenMediaVault/openmediavault-plugin-developers/pool/main/o/openmediavault-omvextrasorg/openmediavault-omvextrasorg_6.1.1_all.deb</code><br><code>dpkg -i openmediavault-omvextrasorg_6.1.1_all.deb</code><br>安装后会提示缺少依赖，按照提示继续输入<br><code>apt --fix-broken install</code><br>修复依赖关系，然后把系统更新到最新。<br><code>apt update &amp;&amp; apt upgrade</code><br>然后刷新omv网页管理界面，已经有omv-extras选项了。<br><img src="/blogs-image/omv-jellyfin/omv-extras-2.png"></p>
<h3 id="安装docker"><a href="#安装docker" class="headerlink" title="安装docker"></a>安装docker</h3><p>安装完成omv-extras可以直接在里面安装docker和portainer，后者是一个可视化的Docker操作界面。<br><img src="/blogs-image/omv-jellyfin/omv-docker-1.png"><br><img src="/blogs-image/omv-jellyfin/omv-docker-2.png"><br>安装完成后在omv的9000端口打开，如此处<code>192.168.70.128:9000</code>，这里可以进行docker镜像和容器的管理。<br><img src="/blogs-image/omv-jellyfin/omv-docker-3.png"></p>
<h2 id="Jellyfin"><a href="#Jellyfin" class="headerlink" title="Jellyfin"></a>Jellyfin</h2><p><a target="_blank" rel="noopener" href="https://jellyfin.org/">Jellyfin</a>是一套多媒体应用程序软件套装，旨在组织、管理和共享数字媒体文件，是Emby的一个自由开源分叉。<br>这里在服务端安装的jellyfin使用的是<a target="_blank" rel="noopener" href="https://hub.docker.com/r/nyanmisaka/jellyfin">中国特供版的镜像</a>，它已经打包好了Intel驱动（用于使用QSV硬解转码）、jellyfin-ffmpeg、补丁、CJK系统字体等，可以实现开箱即用，免去折腾驱动，中文字体等麻烦。</p>
<h3 id="运行容器"><a href="#运行容器" class="headerlink" title="运行容器"></a>运行容器</h3><p>首先拉取容器最新镜像<code>docker pull nyanmisaka/jellyfin</code><br>然后这里采用<code>portainer</code>安装：<br><img src="/blogs-image/omv-jellyfin/jellyfin-install.png"><br>然后参考<a target="_blank" rel="noopener" href="https://jellyfin.org/docs/general/administration/installing.html">Jellyfin官网</a>在<code>docker compose file</code>中填入：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">version: &quot;3.5&quot;</span><br><span class="line">services:</span><br><span class="line">  jellyfin:</span><br><span class="line">    image: nyanmisaka/jellyfin:latest   #使用中国特供版镜像</span><br><span class="line">    container_name: jellyfin</span><br><span class="line">    environment:</span><br><span class="line">      - PUID=1000</span><br><span class="line">      - PGID=100</span><br><span class="line">      - TZ=Asia/Shanghai    #时区使用Asia/Shanghai</span><br><span class="line">      - JELLYFIN_PublishedServerUrl=192.168.0.5 #optional</span><br><span class="line">    volumes:    #修改磁盘映射</span><br><span class="line">      - /path/to/config:/config #对应配置文件</span><br><span class="line">      - /path/to/cache:/cache   #对应缓存</span><br><span class="line">      - /path/to/media:/media   #对应媒体文件</span><br><span class="line">      - /path/to/media2:/media2:ro</span><br><span class="line">    ports:</span><br><span class="line">      - 8096:8096 #webUI端口</span><br><span class="line">      - 8920:8920 #optional</span><br><span class="line">      - 7359:7359/udp #optional</span><br><span class="line">      - 1900:1900/udp #optional</span><br><span class="line">    devices:</span><br><span class="line">      - /dev/dri:/dev/dri   #Intel集显驱动</span><br><span class="line">    restart: unless-stopped</span><br></pre></td></tr></table></figure>
<p>填写完成后点击<code>Deploy the stack</code>即可。<br>之后访问<code>本地地址:8096</code>端口，成功部署运行会进入jellyfin登录界面。</p>
<h3 id="设置jellyfin"><a href="#设置jellyfin" class="headerlink" title="设置jellyfin"></a>设置jellyfin</h3><p>进入web页面设置其实没什么好记录的，基本上按照顺序把媒体库设置好就可以了。<br>硬件转码在<em>控制台-播放</em>中开启。<br><img src="/blogs-image/omv-jellyfin/jellyfin-set.png"><br>需要注意的是，为了能正确搜刮到元数据的话，对应媒体库的命名尽量参考<a target="_blank" rel="noopener" href="https://jellyfin.org/docs/general/server/media/shows.html">Jellyfin推荐命名</a>和<a target="_blank" rel="noopener" href="https://www.themoviedb.org/">TheMovieDB剧集</a>来进行。<br>举例说明：<br>如路人女主是两季TV+剧场版，两季TV中各有一集OVA。但是查询themoviedb发现ova剧集是单独放在特别篇中的：<br><img src="/blogs-image/omv-jellyfin/jellyfin-metadata01.png"><br>因此两季的ova应该被单独拿出来放在<code>S00</code>文件夹中，文件目录应该如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">动画</span><br><span class="line">└── 路人女主的养成方法</span><br><span class="line">    ├── S00</span><br><span class="line">    │   ├── S00E01.mkv #第一季ova</span><br><span class="line">    │   └── S00E02.mkv #第二季ova</span><br><span class="line">    ├── S01</span><br><span class="line">    │   ├── S01E01.mkv</span><br><span class="line">    │   ├── S01E02.mkv</span><br><span class="line">    │   ├── S01E03.mkv</span><br><span class="line">    │   └── ...</span><br><span class="line">    └── S02</span><br><span class="line">        ├── S02E01.mkv</span><br><span class="line">        └── S02E02.mkv</span><br><span class="line">        └── ...</span><br></pre></td></tr></table></figure>
<p>正确识别搜刮的元数据如下：<br><img src="/blogs-image/omv-jellyfin/jellyfin-metadata02.png"><br><img src="/blogs-image/omv-jellyfin/jellyfin-metadata03.png"></p>
<p>插件上除了使用官方的插件库外还有如下几个：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#用于从bangumi番组计划搜刮元数据</span><br><span class="line">https://jellyfin-plugin-bangumi.pages.dev/repository.json</span><br><span class="line">#用于从豆瓣搜刮元数据</span><br><span class="line">https://raw.githubusercontent.com/caryyu/jellyfin-plugin-repo/master/manifest-us.json</span><br><span class="line">#一个jellyfin主题管理插件</span><br><span class="line">https://raw.githubusercontent.com/danieladov/JellyfinPluginManifest/master/manifest.json</span><br></pre></td></tr></table></figure>
<img src="/blogs-image/omv-jellyfin/jellyfin-plugin.png">

<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ol>
<li><a target="_blank" rel="noopener" href="https://post.smzdm.com/p/av7z2564/">OMV安装：系统安装设置及一些功能的开启</a></li>
<li><a target="_blank" rel="noopener" href="https://www.chiphell.com/thread-2375777-1-1.html">]Jellyfin中国特供版+Docker镜像，含驱动，免折腾开箱即用</a></li>
<li><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/363652899">omv 家用 nas 搭建[4]， jellyfin 部署</a></li>
<li><a target="_blank" rel="noopener" href="https://www.himiku.com/archives/deploy-a-more-comfortable-animation-library-with-jellyfin-and-bangumi.html">利用 Jellyfin + Bangumi 打造更舒适的动画媒体库</a></li>
<li><a target="_blank" rel="noopener" href="https://jellyfin.org/docs/general/server/media/shows.html">Jellyfin节目命名指南</a></li>
</ol>

            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="">
            </audio>
            
                <ul id="audio-list" style="display:none">
                    
                        
                            <li title="0" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                        
                            <li title="1" data-url="http://link.hhtjim.com/163/425570952.mp3"></li>
                        
                    
                </ul>
            
        </div>
        
    <div id="gitalk-container" class="comment link"
		data-enable="false"
        data-ae="false"
        data-ci=""
        data-cs=""
        data-r=""
        data-o=""
        data-a=""
        data-d="false"
    >查看评论</div>


    </div>
    
        <div class="side">
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E4%BA%8Enas"><span class="toc-number">1.</span> <span class="toc-text">关于nas</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%85%A5%E6%89%8Bnas"><span class="toc-number">1.1.</span> <span class="toc-text">为什么要入手nas</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%88%90%E5%93%81%E6%9C%BA-or-DIY%EF%BC%9F"><span class="toc-number">1.2.</span> <span class="toc-text">成品机 or DIY？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%88%90%E5%93%81nas"><span class="toc-number">1.2.1.</span> <span class="toc-text">成品nas</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DIY"><span class="toc-number">1.2.2.</span> <span class="toc-text">DIY</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E6%96%B9%E6%A1%88"><span class="toc-number">1.3.</span> <span class="toc-text">个人方案</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85%E4%B8%8E%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.</span> <span class="toc-text">系统安装与设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E7%9B%98%E5%88%B6%E4%BD%9C"><span class="toc-number">2.1.</span> <span class="toc-text">启动盘制作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%B5%81%E7%A8%8B"><span class="toc-number">2.2.</span> <span class="toc-text">安装流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E5%85%B1%E4%BA%AB%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="toc-number">2.3.</span> <span class="toc-text">设置共享文件夹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Clash"><span class="toc-number">2.4.</span> <span class="toc-text">安装Clash</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AEClash"><span class="toc-number">2.4.1.</span> <span class="toc-text">配置Clash</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%85%8D%E7%BD%AE%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8"><span class="toc-number">2.4.2.</span> <span class="toc-text">配置开机启动</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8webUI"><span class="toc-number">2.4.3.</span> <span class="toc-text">使用webUI</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#omv%E5%85%B6%E4%BB%96%E8%AE%BE%E7%BD%AE"><span class="toc-number">2.5.</span> <span class="toc-text">omv其他设置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E7%94%A8docker"><span class="toc-number">3.</span> <span class="toc-text">启用docker</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85omv-extras"><span class="toc-number">3.1.</span> <span class="toc-text">安装omv-extras</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85docker"><span class="toc-number">3.2.</span> <span class="toc-text">安装docker</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Jellyfin"><span class="toc-number">4.</span> <span class="toc-text">Jellyfin</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%90%E8%A1%8C%E5%AE%B9%E5%99%A8"><span class="toc-number">4.1.</span> <span class="toc-text">运行容器</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AEjellyfin"><span class="toc-number">4.2.</span> <span class="toc-text">设置jellyfin</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83"><span class="toc-number">5.</span> <span class="toc-text">参考</span></a></li></ol>	
        </div>
    
</div>


    </div>
</div>
</body>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/typed.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>






</html>
